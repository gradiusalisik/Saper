(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){},13:function(e,t,n){e.exports=n(20)},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(4),i=n.n(r),c=(n(19),n(2)),l=n(5),s=n(1),u=n(6),m=n(7),d=n(11),f=n(8),g=n(12),b=n(9),h=n.n(b),p=n(10),v=n.n(p),w=h.a.bind(v.a),k=10,B={row:9,col:9},O=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).getGrid=function(){for(var e=[],t=0;t<B.row;t+=1){for(var n=[],a=0;a<B.col;a+=1)n.push({row:t,col:a,isBomb:!1,isOpen:!1,numberAround:"",stateRightClick:""});e.push(n)}return e},e.hasBomb=function(t){return e.state.grid[t.row][t.col].isBomb},e.getQuantityBomb=function(t){for(var n=t.rowId,a=t.colId,o=0,r=n-1;r<=n+1;r+=1)for(var i=a-1;i<=a+1;i+=1)e.inRange({row:r,col:i})&&e.hasBomb({row:r,col:i})&&(o+=1);return o},e.getNumbers=function(){var t=e.state.grid,n=Object(s.a)(t);n.map(function(t,a){return t.map(function(t,o){if(t.isBomb)e.setState({numberAround:""});else{var r=e.getQuantityBomb({rowId:a,colId:o});n[a][o].numberAround=r}})}),e.setState({grid:n})},e.getBombs=function(){for(var t=e.state,n=t.grid,a=t.quantityBomb,o=Object(s.a)(n),r=0;r<a;r+=1){var i={row:0,col:0};do{i={row:Math.floor(9*Math.random()),col:Math.floor(9*Math.random())}}while(o[i.row][i.col].isBomb);o[i.row][i.col].isBomb=!0}e.setState({grid:o})},e.gameOver=function(){var t=e.state.grid,n=Object(s.a)(t);n.map(function(e,t){return e.map(function(e,a){e.isBomb&&(n[t][a].isOpen=!0)})}),e.handleStart(),e.setState({gameOver:!0,grid:n})},e.openCell=function(t){var n=e.state.grid,a=Object(s.a)(n);a[t.row][t.col].isOpen=!0,e.setState(function(e){return{grid:a,quantityOpen:e.quantityOpen+1}})},e.checkIsOpen=function(t){return e.state.grid[t.row][t.col].isOpen},e.openCellAround=function(t){var n=e.state.grid;e.openCell(t);for(var a=t.row-1;a<=t.row+1;a+=1)for(var o=t.col-1;o<=t.col+1;o+=1)e.inRange({row:a,col:o})&&(e.checkIsOpen({row:a,col:o})||e.openBox(n[a][o]))},e.inRange=function(e){return e.row>=0&&e.row<B.row&&e.col>=0&&e.col<B.col},e.openBox=function(t){if("flag"===t.stateRightClick||t.isOpen)return!1;t.isBomb&&(e.gameOver(),e.openCell(t)),t.numberAround&&e.openCell(t),t.numberAround||t.isBomb||e.openCellAround(t)},e.handleClick=function(t){return function(){e.handleStart(),e.openBox(t)}},e.getStateRightClick=function(t){var n=e.state,a=n.grid,o=n.quantityFlagBomb,r=Object(s.a)(a);switch(t.stateRightClick){case"":o>0&&!e.checkIsOpen(t)&&(r[t.row][t.col].stateRightClick="flag",e.setState(function(e){return{grid:r,quantityFlagBomb:0===e.quantityFlagBomb?0:e.quantityFlagBomb-1}}));break;case"flag":r[t.row][t.col].stateRightClick="question",e.setState(function(e){return{grid:r,quantityFlagBomb:e.quantityFlagBomb>=k?k:e.quantityFlagBomb+1}});break;case"question":default:r[t.row][t.col].stateRightClick="",e.setState({grid:r})}},e.handleClickContextMenu=function(t){return function(n){n.preventDefault(),e.getStateRightClick(t)}},e.handleClickContextGrid=function(e){return e.preventDefault(),!1},e.setReload=function(){e.setState({isReload:!1,seconds:0}),e.getBombs(),e.getNumbers(),clearInterval(e.timerID)},e.handleRestart=function(){e.setState(Object(l.a)({},e.initialState,{grid:e.getGrid(),isReload:!0}))},e.tick=function(){e.setState(function(e){return{seconds:e.seconds+1}})},e.handleStart=function(){e.state.isStoppedTimer?(e.timerID=setInterval(function(){return e.tick()},1e3),e.setState({isStoppedTimer:!1})):(clearInterval(e.timerID),e.setState({isStoppedTimer:!0}))},e.correctValueFormat=function(e){return e<10?"0".concat(e):e},e.transformTime=function(){var t=e.state.seconds,n=Math.floor(t%3600/60),a=Math.floor(t%60);return{minutes:e.correctValueFormat(n),seconds:e.correctValueFormat(a)}},e.initialState={grid:e.getGrid(),quantityFlagBomb:k,quantityBomb:k,gameOver:!1,quantityOpen:0,isReload:!1,isStoppedTimer:!0,seconds:0},e.state=e.initialState,e}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.getBombs(),this.getNumbers()}},{key:"componentDidUpdate",value:function(){this.state.isReload&&this.setReload()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){var e=this,t=this.state,n=t.grid,a=t.quantityBomb,r=t.quantityFlagBomb,i=t.gameOver,l=t.quantityOpen===B.row*B.col-a,s=this.transformTime(),u=s.minutes,m=s.seconds;return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"game",onContextMenu:this.handleClickContextGrid},o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header__bomb"},o.a.createElement("div",{className:"header__flag"}),o.a.createElement("div",{className:"header__bomb-quantity"},r)),o.a.createElement("div",{className:"header__timer-wrap"},o.a.createElement("div",{className:"header__timer"},u," : ",m),o.a.createElement("div",{className:"header__timer-icon"}))),o.a.createElement("section",{className:w("grid",{grid_gameOver:i||l})},o.a.createElement("div",{className:"stub"}),n.map(function(t){return t.map(function(t){return o.a.createElement("button",{type:"button",onContextMenu:e.handleClickContextMenu(t),onClick:e.handleClick(t),key:"".concat(t.row," ").concat(t.col),className:w("cell",Object(c.a)({cell_isBomb:t.isOpen&&t.isBomb,cell_isOpen:t.isOpen,cell_flag:"flag"===t.stateRightClick,cell_question:"question"===t.stateRightClick},"cell_number_".concat(t.numberAround),t.isOpen&&t.numberAround))})})})),o.a.createElement("footer",{className:"footer"},!i&&!l&&o.a.createElement("div",{className:"footer__begin"},"\u0418\u0433\u0440\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\u0441\u044c."),i&&!l&&o.a.createElement("div",{className:"footer__begin"},"\u0418\u0433\u0440\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0430\u0441\u044c.",o.a.createElement("button",{type:"button",onClick:this.handleRestart,className:"footer__restart"})),l&&o.a.createElement("div",{className:"footer__begin"},"\u041f\u043e\u0431\u0435\u0434\u0430!",o.a.createElement("button",{type:"button",onClick:this.handleRestart,className:"footer__restart"})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.8a35e7e3.chunk.js.map